import { NewsItem, SearchResult } from '../types/news'

// æ¨¡æ‹Ÿæ–°é—»æ•°æ®
const mockNewsData: NewsItem[] = [
  {
    id: '1',
    title: 'OpenAIå‘å¸ƒGPT-5ï¼šAIèƒ½åŠ›å®ç°è´¨çš„é£è·ƒ',
    summary: 'OpenAIä»Šæ—¥æ­£å¼å‘å¸ƒGPT-5æ¨¡å‹ï¼Œåœ¨æ¨ç†èƒ½åŠ›ã€å¤šæ¨¡æ€ç†è§£å’Œä»£ç ç”Ÿæˆæ–¹é¢å–å¾—é‡å¤§çªç ´ï¼Œè¢«ä¸šç•Œç§°ä¸º"é€šç”¨äººå·¥æ™ºèƒ½çš„æ›™å…‰"ã€‚',
    content: 'OpenAIä»Šæ—¥æ­£å¼å‘å¸ƒäº†å¤‡å—æœŸå¾…çš„GPT-5æ¨¡å‹ã€‚è¿™æ¬¾æ–°æ¨¡å‹åœ¨å¤šä¸ªç»´åº¦ä¸Šå±•ç°å‡ºäº†ä»¤äººæƒŠå¹çš„èƒ½åŠ›æå‡...',
    source: 'ç§‘æŠ€æ—¥æŠ¥',
    author: 'å¼ æ˜',
    category: 'tech',
    imageUrl: 'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop',
    publishedAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),
    url: '#',
    keywords: ['äººå·¥æ™ºèƒ½', 'GPT-5', 'OpenAI', 'å¤§æ¨¡å‹'],
  },
  {
    id: '2',
    title: 'ä¸­å›½æ–°èƒ½æºæ±½è½¦å‡ºå£é‡è¿ç»­ä¸‰ä¸ªæœˆåˆ›æ–°é«˜',
    summary: 'æ®æµ·å…³æ€»ç½²æœ€æ–°æ•°æ®ï¼Œä¸­å›½æ–°èƒ½æºæ±½è½¦å‡ºå£é‡åœ¨2024å¹´å‰ä¸‰ä¸ªæœˆè¿ç»­åˆ›ä¸‹å†å²æ–°é«˜ï¼Œæˆä¸ºå…¨çƒæœ€å¤§çš„æ–°èƒ½æºæ±½è½¦å‡ºå£å›½ã€‚',
    content: 'æµ·å…³æ€»ç½²ä»Šæ—¥å‘å¸ƒçš„æ•°æ®æ˜¾ç¤ºï¼Œä¸­å›½æ–°èƒ½æºæ±½è½¦å‡ºå£ç»§ç»­ä¿æŒå¼ºåŠ²å¢é•¿æ€åŠ¿...',
    source: 'ç»æµè§‚å¯ŸæŠ¥',
    author: 'æå',
    category: 'finance',
    imageUrl: 'https://images.unsplash.com/photo-1593941707882-a5bba14938c7?w=600&h=400&fit=crop',
    publishedAt: new Date(Date.now() - 4 * 60 * 60 * 1000).toISOString(),
    url: '#',
    keywords: ['æ–°èƒ½æº', 'æ±½è½¦', 'å‡ºå£', 'ç»æµ'],
  },
  {
    id: '3',
    title: 'å…¨å›½é«˜è€ƒæ”¹é©æ–°æ”¿ç­–ï¼šå–æ¶ˆæ–‡ç†åˆ†ç§‘æ­£å¼å®æ–½',
    summary: 'æ•™è‚²éƒ¨å®£å¸ƒï¼Œ2024å¹´èµ·å…¨å›½ç»Ÿä¸€å®æ–½æ–°é«˜è€ƒæ”¹é©ï¼Œå–æ¶ˆä¼ ç»Ÿæ–‡ç†åˆ†ç§‘ï¼Œé‡‡ç”¨"3+1+2"æ¨¡å¼ï¼Œç»™äºˆå­¦ç”Ÿæ›´å¤šé€‰æ‹©ç©ºé—´ã€‚',
    content: 'æ•™è‚²éƒ¨ä»Šæ—¥å¬å¼€æ–°é—»å‘å¸ƒä¼šï¼Œå®£å¸ƒæ–°é«˜è€ƒæ”¹é©æ”¿ç­–å°†äº2024å¹´ç§‹å­£å­¦æœŸèµ·å…¨é¢å®æ–½...',
    source: 'äººæ°‘æ•™è‚²',
    author: 'ç‹èŠ³',
    category: 'society',
    imageUrl: 'https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=600&h=400&fit=crop',
    publishedAt: new Date(Date.now() - 6 * 60 * 60 * 1000).toISOString(),
    url: '#',
    keywords: ['é«˜è€ƒ', 'æ•™è‚²æ”¹é©', 'æ”¿ç­–'],
  },
  {
    id: '4',
    title: 'è‹¹æœVision Proæ­£å¼åœ¨ä¸­å›½å¤§é™†å‘å”®',
    summary: 'è‹¹æœå…¬å¸å®£å¸ƒVision Proå¤´æ˜¾è®¾å¤‡ä»Šæ—¥èµ·åœ¨ä¸­å›½å¤§é™†åœ°åŒºæ­£å¼å¼€å”®ï¼Œé¦–æ‰¹ç”¨æˆ·å·²å¼€å§‹ä½“éªŒè¿™æ¬¾é©å‘½æ€§çš„ç©ºé—´è®¡ç®—è®¾å¤‡ã€‚',
    content: 'ç»è¿‡æ•°æœˆçš„ç­‰å¾…ï¼Œè‹¹æœVision Proç»ˆäºåœ¨ä¸­å›½å¤§é™†å¸‚åœºæ­£å¼å‘å”®...',
    source: 'æ•°ç å‰æ²¿',
    author: 'é™ˆåˆš',
    category: 'tech',
    imageUrl: 'https://images.unsplash.com/photo-1622979135225-d2ba269cf1ac?w=600&h=400&fit=crop',
    publishedAt: new Date(Date.now() - 8 * 60 * 60 * 1000).toISOString(),
    url: '#',
    keywords: ['è‹¹æœ', 'Vision Pro', 'AR', 'VR'],
  },
  {
    id: '5',
    title: 'å¤®è¡Œå®£å¸ƒé™å‡†0.5ä¸ªç™¾åˆ†ç‚¹ é‡Šæ”¾ä¸‡äº¿æµåŠ¨æ€§',
    summary: 'ä¸­å›½äººæ°‘é“¶è¡Œå®£å¸ƒä¸‹è°ƒé‡‘èæœºæ„å­˜æ¬¾å‡†å¤‡é‡‘ç‡0.5ä¸ªç™¾åˆ†ç‚¹ï¼Œé¢„è®¡å°†é‡Šæ”¾é•¿æœŸèµ„é‡‘çº¦1ä¸‡äº¿å…ƒï¼Œæ”¯æŒå®ä½“ç»æµå‘å±•ã€‚',
    content: 'ä¸­å›½äººæ°‘é“¶è¡Œä»Šæ—¥å‘å¸ƒå…¬å‘Šï¼Œå†³å®šäºä¸‹æœˆåˆä¸‹è°ƒé‡‘èæœºæ„å­˜æ¬¾å‡†å¤‡é‡‘ç‡...',
    source: 'è´¢ç»å¤´æ¡',
    author: 'åˆ˜å¼º',
    category: 'finance',
    imageUrl: 'https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=600&h=400&fit=crop',
    publishedAt: new Date(Date.now() - 10 * 60 * 60 * 1000).toISOString(),
    url: '#',
    keywords: ['å¤®è¡Œ', 'é™å‡†', 'è´§å¸æ”¿ç­–', 'ç»æµ'],
  },
  {
    id: '6',
    title: 'å›½äº§å¤§é£æœºC919å¼€é€šåŒ—äº¬è‡³ä¸Šæµ·èˆªçº¿',
    summary: 'ä¸­å›½å•†é£å…¬å¸å®£å¸ƒï¼Œå›½äº§å¤§å‹å®¢æœºC919æ­£å¼å¼€é€šåŒ—äº¬è‡³ä¸Šæµ·å•†ä¸šèˆªçº¿ï¼Œæ ‡å¿—ç€å›½äº§å¤§é£æœºå•†ä¸šè¿è¥è¿›å…¥æ–°é˜¶æ®µã€‚',
    content: 'ä»Šæ—¥ä¸Šåˆï¼Œé¦–æ¶C919æ‰§é£çš„åŒ—äº¬è‡³ä¸Šæµ·èˆªç­ä»åŒ—äº¬å¤§å…´æœºåœºé¡ºåˆ©èµ·é£...',
    source: 'èˆªç©ºå‘¨åˆŠ',
    author: 'èµµæ˜',
    category: 'tech',
    imageUrl: 'https://images.unsplash.com/photo-1436491865332-7a61a109cc05?w=600&h=400&fit=crop',
    publishedAt: new Date(Date.now() - 12 * 60 * 60 * 1000).toISOString(),
    url: '#',
    keywords: ['C919', 'å›½äº§å¤§é£æœº', 'èˆªç©º'],
  },
  {
    id: '7',
    title: 'æ˜¥èŠ‚æ¡£ç”µå½±ç¥¨æˆ¿çªç ´80äº¿ åˆ›å†å²æ–°é«˜',
    summary: 'æ®å›½å®¶ç”µå½±å±€ç»Ÿè®¡ï¼Œ2024å¹´æ˜¥èŠ‚æ¡£ç”µå½±æ€»ç¥¨æˆ¿å·²çªç ´80äº¿å…ƒï¼Œåˆ·æ–°ä¸­å›½å½±å²æ˜¥èŠ‚æ¡£ç¥¨æˆ¿çºªå½•ï¼Œè§‚å½±äººæ¬¡è¶…1.6äº¿ã€‚',
    content: '2024å¹´æ˜¥èŠ‚æ¡£ç”µå½±å¸‚åœºè¿æ¥å¼€é—¨çº¢ï¼Œå¤šéƒ¨å›½äº§å½±ç‰‡è¡¨ç°äº®çœ¼...',
    source: 'å¨±ä¹åœ¨çº¿',
    author: 'æ—å°çº¢',
    category: 'entertainment',
    imageUrl: 'https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=600&h=400&fit=crop',
    publishedAt: new Date(Date.now() - 14 * 60 * 60 * 1000).toISOString(),
    url: '#',
    keywords: ['æ˜¥èŠ‚æ¡£', 'ç”µå½±', 'ç¥¨æˆ¿'],
  },
  {
    id: '8',
    title: 'é‡å­è®¡ç®—æœºå®ç°258é‡å­æ¯”ç‰¹è¿ç®—çªç ´',
    summary: 'ä¸­ç§‘é™¢é‡å­ä¿¡æ¯å®éªŒå®¤å®£å¸ƒæˆåŠŸç ”åˆ¶258é‡å­æ¯”ç‰¹å¯ç¼–ç¨‹é‡å­è®¡ç®—æœºï¼Œåœ¨é‡å­çº é”™å’Œé‡å­ç®—æ³•æ–¹é¢å–å¾—é‡è¦è¿›å±•ã€‚',
    content: 'ä¸­å›½ç§‘å­¦é™¢é‡å­ä¿¡æ¯å®éªŒå®¤ä»Šæ—¥å®£å¸ƒäº†ä¸€é¡¹é‡å¤§çªç ´...',
    source: 'ç§‘æŠ€å‰æ²¿',
    author: 'å‘¨åšå£«',
    category: 'tech',
    imageUrl: 'https://images.unsplash.com/photo-1635070041078-e363dbe005cb?w=600&h=400&fit=crop',
    publishedAt: new Date(Date.now() - 16 * 60 * 60 * 1000).toISOString(),
    url: '#',
    keywords: ['é‡å­è®¡ç®—', 'é‡å­æ¯”ç‰¹', 'ç§‘æŠ€çªç ´'],
  },
]

// æ¨¡æ‹ŸAIæ€»ç»“
const generateAISummary = (keyword: string, news: NewsItem[]): string => {
  const summaries: Record<string, string> = {
    'äººå·¥æ™ºèƒ½': `ğŸ“Š ä»Šæ—¥AIé¢†åŸŸè¦é—»ç»¼è¿°ï¼š

1. **æŠ€æœ¯çªç ´**ï¼šGPT-5æ¨¡å‹æ­£å¼å‘å¸ƒï¼Œåœ¨æ¨ç†èƒ½åŠ›å’Œå¤šæ¨¡æ€ç†è§£æ–¹é¢å®ç°é‡å¤§é£è·ƒï¼Œè¢«è®¤ä¸ºæ˜¯è¿ˆå‘é€šç”¨äººå·¥æ™ºèƒ½çš„é‡è¦ä¸€æ­¥ã€‚

2. **äº§ä¸šåŠ¨æ€**ï¼šå¤šå®¶ç§‘æŠ€å·¨å¤´åŠ å¤§AIç ”å‘æŠ•å…¥ï¼Œå›½å†…å¤–AIåˆåˆ›ä¼ä¸šèèµ„æ´»è·ƒï¼Œè¡Œä¸šç«äº‰è¿›ä¸€æ­¥åŠ å‰§ã€‚

3. **åº”ç”¨è½åœ°**ï¼šAIåœ¨åŒ»ç–—è¯Šæ–­ã€è‡ªåŠ¨é©¾é©¶ã€æ™ºèƒ½åˆ¶é€ ç­‰é¢†åŸŸçš„åº”ç”¨æŒç»­æ·±åŒ–ï¼Œå•†ä¸šåŒ–è¿›ç¨‹åŠ é€Ÿã€‚

ğŸ’¡ æ ¸å¿ƒè§‚ç‚¹ï¼šå½“å‰AIæŠ€æœ¯æ­£å¤„äºä»"å¯ç”¨"åˆ°"å¥½ç”¨"çš„å…³é”®è½¬å‹æœŸï¼Œé¢„è®¡æœªæ¥12ä¸ªæœˆå°†æœ‰æ›´å¤šçªç ´æ€§åº”ç”¨è½åœ°ã€‚`,
    
    'ç»æµ': `ğŸ“ˆ ä»Šæ—¥è´¢ç»èµ„è®¯æ‘˜è¦ï¼š

1. **è´§å¸æ”¿ç­–**ï¼šå¤®è¡Œå®£å¸ƒé™å‡†0.5ä¸ªç™¾åˆ†ç‚¹ï¼Œé‡Šæ”¾çº¦ä¸‡äº¿æµåŠ¨æ€§ï¼Œæ—¨åœ¨æ”¯æŒå®ä½“ç»æµå¹³ç¨³å‘å±•ã€‚

2. **å¤–è´¸å¢é•¿**ï¼šæ–°èƒ½æºæ±½è½¦å‡ºå£æŒç»­åˆ›æ–°é«˜ï¼Œä¸­å›½åˆ¶é€ ä¸šåœ¨å…¨çƒä¾›åº”é“¾ä¸­çš„åœ°ä½è¿›ä¸€æ­¥å·©å›ºã€‚

3. **æ¶ˆè´¹å¸‚åœº**ï¼šæ˜¥èŠ‚æ¡£ç¥¨æˆ¿çªç ´å†å²è®°å½•ï¼Œæ˜¾ç¤ºå›½å†…æ¶ˆè´¹å¸‚åœºéŸ§æ€§å¼ºåŠ²ï¼Œå±…æ°‘æ¶ˆè´¹ä¿¡å¿ƒé€æ­¥æ¢å¤ã€‚

ğŸ’¡ æ ¸å¿ƒè§‚ç‚¹ï¼šå¤šé¡¹æ”¿ç­–ç»„åˆæ‹³æŒç»­å‘åŠ›ï¼Œç»æµåŸºæœ¬é¢ç¨³ä¸­å‘å¥½ï¼Œå¸‚åœºé¢„æœŸé€æ­¥æ”¹å–„ã€‚`,
    
    'ç§‘æŠ€': `ğŸ”¬ ä»Šæ—¥ç§‘æŠ€èµ„è®¯æ±‡æ€»ï¼š

1. **AIé¢†åŸŸ**ï¼šGPT-5å‘å¸ƒå¼•å‘è¡Œä¸šéœ‡åŠ¨ï¼Œå¤§æ¨¡å‹æŠ€æœ¯è¿­ä»£åŠ é€Ÿï¼Œå›½äº§å¤§æ¨¡å‹ä¹Ÿåœ¨å¿«é€Ÿè¿½èµ¶ã€‚

2. **æ¶ˆè´¹ç”µå­**ï¼šè‹¹æœVision Proåœ¨ä¸­å›½å‘å”®ï¼Œç©ºé—´è®¡ç®—æ—¶ä»£æ­£å¼å¼€å¯ï¼ŒXRè®¾å¤‡å¸‚åœºç«äº‰åŠ å‰§ã€‚

3. **èˆªç©ºèˆªå¤©**ï¼šC919å¼€é€šæ–°èˆªçº¿ï¼Œå›½äº§å¤§é£æœºå•†ä¸šåŒ–è¿è¥ç¨³æ­¥æ¨è¿›ã€‚

4. **é‡å­è®¡ç®—**ï¼š258é‡å­æ¯”ç‰¹çªç ´å±•ç°ä¸­å›½åœ¨é‡å­é¢†åŸŸçš„æŠ€æœ¯å®åŠ›ã€‚

ğŸ’¡ æ ¸å¿ƒè§‚ç‚¹ï¼šç§‘æŠ€åˆ›æ–°æ­£æˆä¸ºæ¨åŠ¨ç»æµé«˜è´¨é‡å‘å±•çš„æ ¸å¿ƒå¼•æ“ï¼Œå…³é”®æŠ€æœ¯è‡ªä¸»å¯æ§å–å¾—ç§¯æè¿›å±•ã€‚`,
  }
  
  return summaries[keyword] || `ğŸ“‹ å…³äº"${keyword}"çš„èµ„è®¯æ€»ç»“ï¼š

ä»Šæ—¥å…±æ”¶é›†åˆ° ${news.length} æ¡ç›¸å…³æ–°é—»ã€‚ä¸»è¦æ¶‰åŠä»¥ä¸‹æ–¹é¢ï¼š

${news.slice(0, 3).map((n, i) => `${i + 1}. ${n.title}`).join('\n')}

ğŸ’¡ å»ºè®®æŒç»­å…³æ³¨è¯¥é¢†åŸŸçš„æœ€æ–°åŠ¨æ€ï¼Œä»¥è·å–æ›´å…¨é¢çš„ä¿¡æ¯ã€‚`
}

// æ¨¡æ‹Ÿæœç´¢å»¶è¿Ÿ
const delay = (ms: number) => new Promise(resolve => setTimeout(resolve, ms))

export async function searchNews(keyword: string): Promise<SearchResult> {
  await delay(1500) // æ¨¡æ‹ŸAPIè¯·æ±‚å»¶è¿Ÿ
  
  const lowercaseKeyword = keyword.toLowerCase()
  
  // æ ¹æ®å…³é”®è¯è¿‡æ»¤æ–°é—»
  let filteredNews = mockNewsData.filter(news => 
    news.title.toLowerCase().includes(lowercaseKeyword) ||
    news.summary.toLowerCase().includes(lowercaseKeyword) ||
    news.keywords.some(k => k.toLowerCase().includes(lowercaseKeyword)) ||
    news.category.toLowerCase().includes(lowercaseKeyword)
  )
  
  // å¦‚æœæ²¡æœ‰ç²¾ç¡®åŒ¹é…ï¼Œè¿”å›éƒ¨åˆ†éšæœºæ–°é—»
  if (filteredNews.length === 0) {
    filteredNews = mockNewsData.slice(0, 4)
  }
  
  return {
    keyword,
    news: filteredNews,
    aiSummary: generateAISummary(keyword, filteredNews),
    searchedAt: new Date().toISOString(),
  }
}

export function getLatestNews(): NewsItem[] {
  return mockNewsData
}

export function getNewsByCategory(category: string): NewsItem[] {
  return mockNewsData.filter(news => news.category === category)
}

export function getHotKeywords(): string[] {
  return ['äººå·¥æ™ºèƒ½', 'æ–°èƒ½æº', 'é‡å­è®¡ç®—', 'ç»æµæ”¿ç­–', 'C919', 'Vision Pro', 'æ˜¥èŠ‚æ¡£', 'GPT-5']
}
